<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Time Teaching App</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  h2 { margin-top: 30px; }
  #dashboard, #quiz { max-width: 400px; margin: auto; }
  #clockCanvas { width: 100%; max-width: 320px; }
  .primary-btn { padding: 14px 26px; font-size: 1.2em; background:#4CAF50; color:white; border:none; border-radius:8px; }
  .secondary-btn { padding: 8px 14px; font-size:0.9em; background:#ccc; border:none; border-radius:6px; margin-top:10px; }
  @media (max-width:600px){ #endBtn{ position:fixed; bottom:-200px; }} { width: 100%; max-width: 300px; }
  .hidden { display: none; }
  button { padding: 10px 20px; margin-top: 15px; }
</style>
</head>
<body>
<div id="dashboard">
  <h2>Time Practice Settings</h2>
  <label><input type="checkbox" id="fullHours"> Full hours (e.g., 7:00)</label><br>
  <label><input type="checkbox" id="halfHours"> Half hours (e.g., 7:30)</label><br>
  <label><input type="checkbox" id="quarterHours"> Quarter hours (e.g., 7:15, 7:45)</label><br>
  <label><input type="checkbox" id="fivePastTo"> Five‑past / five‑to times</label><br>
  <label><input type="checkbox" id="tenPastTo"> Ten‑past / ten‑to times</label><br>
  <label><input type="checkbox" id="anyTime"> Any minute (mixed times)</label><br>
  <button onclick="startQuiz()" class="primary-btn" style="width:200px;"()">Start</button>
</div>

<div id="quiz" class="hidden" style="text-align:center;">
  <h2>What time is it?</h2>
  <canvas id="clockCanvas" width="300" height="300"></canvas>
  <div style="margin-top:18px;">
    <button id="mainBtn" class="primary-btn" onclick="showAnswer()" style="width:200px;">Show Time</button>
  </div>
  <p id="digital" style="font-size:1.4em; font-weight:bold; margin-top:14px;"></p>
  <p id="words" style="font-size:1.2em;"></p>
  <div style="margin-top:10px;">
    
  </div>
</div>
  <div style="margin-top:10px;">
    <!-- Smaller secondary End button on a separate line -->
    <button id="endBtn" class="secondary-btn" onclick="endQuiz()">End</button>
  </div>
  <p id="digital" style="font-size:1.4em; font-weight:bold; margin-top:14px;"></p>
  <p id="words" style="font-size:1.2em;"></p>
</div>

<script>
let hour, minute;
let currentOptions = [];

function startQuiz() {
  const opts = [];
  if (fullHours.checked) opts.push("full");
  if (halfHours.checked) opts.push("half");
  if (quarterHours.checked) opts.push("quarter");
  if (fivePastTo.checked) opts.push("five");
  if (tenPastTo.checked) opts.push("ten");
  if (anyTime.checked) opts.push("any");

  if (opts.length === 0) { alert("Select at least one option."); return; }

  currentOptions = opts;
  document.getElementById('dashboard').classList.add('hidden');
  document.getElementById('quiz').classList.remove('hidden');
  nextQuestion();
}

function nextQuestion() {
  const type = currentOptions[Math.floor(Math.random() * currentOptions.length)];

  switch(type) {
    case "full": minute = 0; break;
    case "half": minute = 30; break;
    case "quarter": minute = [15,45][Math.floor(Math.random()*2)]; break;
    case "five": minute = [5,55][Math.floor(Math.random()*2)]; break;
    case "ten": minute = [10,50][Math.floor(Math.random()*2)]; break;
    case "any": minute = Math.floor(Math.random()*60); break;
  }

  hour = Math.floor(Math.random()*12) || 12;

  drawClock(hour, minute);
  digital.textContent = "";
  words.textContent = "";
  mainBtn.textContent = "Show Time";
}

function drawClock(h, m) {
  const canvas = document.getElementById("clockCanvas");
  const ctx = canvas.getContext("2d");
  ctx.clearRect(0,0,300,300);

  const cx=150, cy=150, r=130;

  ctx.lineWidth = 3;
  ctx.beginPath(); ctx.arc(cx,cy,r,0,Math.PI*2); ctx.stroke();

  ctx.font = "26px Arial";
  ctx.textAlign="center";
  ctx.textBaseline="middle";

  for(let i=1;i<=12;i++){
    const ang = (i*30-90)*Math.PI/180;
    const x = cx + Math.cos(ang)*105;
    const y = cy + Math.sin(ang)*105;
    ctx.fillText(i,x,y);
  }

  const minAng = (m*6-90)*Math.PI/180;
  const hrAng = ((h%12)*30 + m*0.5 -90)*Math.PI/180;

  ctx.lineWidth = 2;
  ctx.beginPath(); ctx.moveTo(cx,cy);
  ctx.lineTo(cx+Math.cos(minAng)*110, cy+Math.sin(minAng)*110);
  ctx.stroke();

  ctx.lineWidth = 6;
  ctx.beginPath(); ctx.moveTo(cx,cy);
  ctx.lineTo(cx+Math.cos(hrAng)*70, cy+Math.sin(hrAng)*70);
  ctx.stroke();
}

function showAnswer() {
  if (mainBtn.textContent === "Show Time") {
    const h = hour.toString().padStart(2,'0');
    const m = minute.toString().padStart(2,'0');
    digital.textContent = `${h}:${m}`;
    words.textContent = timeToWords(hour, minute);
    mainBtn.textContent = "Next Time";
  } else {
    nextQuestion();
  }
}

function capitalize(str){ return str.charAt(0).toUpperCase() + str.slice(1); }

function timeToWords(h,m){
  const nums=["twelve","one","two","three","four","five","six","seven","eight","nine","ten","eleven"];
  const hourWord = nums[h%12];
  const nextHour = nums[(h%12)+1];

  if(m===0) return capitalize(`${hourWord} o'clock`);
  if(m===15) return capitalize(`quarter past ${hourWord}`);
  if(m===30) return capitalize(`half past ${hourWord}`);
  if(m===45) return capitalize(`quarter to ${nextHour}`);
  if(m<30) return capitalize(`${m} past ${hourWord}`);
  return capitalize(`${60-m} to ${nextHour}`);
}

function endQuiz(){
  document.getElementById('quiz').classList.add('hidden');
  document.getElementById('dashboard').classList.remove('hidden');
}
</script>
</body>
</html>
